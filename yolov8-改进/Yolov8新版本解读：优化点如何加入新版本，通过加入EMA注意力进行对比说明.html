<div id="article_content" class="article_content clearfix">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-dc4a025e85.css">
                <div id="content_views" class="htmledit_views">
                    <p><span style="color:#fe2c24;"><strong>æœ¬æ–‡ç›®çš„ï¼š</strong></span></p> 
<p><span style="color:#956fe7;"><strong>æœ€è¿‘yolov8è¿›è¡Œäº†ä¸€æ¬¡è¾ƒå¤§çš„æ›´æ–°ï¼Œå¯¹ä¸€äº›ä¼˜åŒ–ç‚¹åŠ åœ¨å“ªä¸ªä½ç½®ä¸Šæœ‰äº›å˜åŠ¨ï¼Œå› æ­¤æœ¬æ–‡ä¸»è¦é€šè¿‡å…·ä½“æ¡ˆåˆ—è¿›è¡Œå¯¹æ¯”å’Œè¯´æ˜ï¼Œä»¥ä¾¿åœ¨æ–°ç‰ˆæœ¬ä¸Šèƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ã€‚</strong></span></p> 
<p>è€ç‰ˆæœ¬</p> 
<p>ultralytics/nn</p> 
<p><img alt="" height="118" src="https://img-blog.csdnimg.cn/2b797d97a4894f6a96f9c4a1998c4e32.png" width="256"></p> 
<p>&nbsp;æ–°ç‰ˆæœ¬æ›´æ–°ä¸ºï¼š</p> 
<p><img alt="" height="108" src="https://img-blog.csdnimg.cn/43a7fb907a8b499d8401aa78b03cf51c.png" width="265"></p> 
<p>modules<a href="https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E5%A4%B9&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E5%A4%B9&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;æ–‡ä»¶å¤¹\&quot;}&quot;}" data-tit="æ–‡ä»¶å¤¹" data-pretit="æ–‡ä»¶å¤¹">æ–‡ä»¶å¤¹</a>ä¸‹å†…å®¹å¦‚ä¸‹ï¼š</p> 
<p><img alt="" height="145" src="https://img-blog.csdnimg.cn/bce1d9a3aa0843a0b6dab7209c4ecb0c.png" width="275"></p> 
<p>&nbsp;&nbsp;è§£è¯»ï¼š</p> 
<p><span style="color:#fe2c24;"><strong>å°†modules.pyæ‹†åˆ†ä¸º</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>1.__init__.py</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>2.block.py</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>3.conv.py</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>4.head.py</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>5.transformer.py</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>6.utils.py</strong></span></p> 
<p></p> 
<p>ğŸ’¡ğŸ’¡ğŸ’¡<span style="color:#4da8ee;">Yolov8é­”æœ¯å¸ˆï¼Œç‹¬å®¶é¦–å‘åˆ›æ–°ï¼ˆåŸåˆ›ï¼‰ï¼Œé€‚ç”¨äºYolov5ã€Yolov7ã€Yolov8ç­‰å„ä¸ªYoloç³»åˆ—ï¼Œä¸“æ æ–‡ç« æä¾›æ¯ä¸€æ­¥æ­¥éª¤å’Œæºç ï¼Œè½»æ¾å¸¦ä½ ä¸Šæ‰‹é­”æ”¹ç½‘ç»œ</span></p> 
<p>ğŸ’¡ğŸ’¡ğŸ’¡<span style="color:#38d8f0;">é‡ç‚¹ï¼šé€šè¿‡æœ¬ä¸“æ çš„é˜…è¯»ï¼Œåç»­ä½ ä¹Ÿå¯ä»¥è‡ªå·±é­”æ”¹ç½‘ç»œï¼Œåœ¨ç½‘ç»œä¸åŒä½ç½®ï¼ˆBackboneã€headã€detectã€lossç­‰ï¼‰è¿›è¡Œé­”æ”¹ï¼Œå®ç°åˆ›æ–°ï¼ï¼ï¼</span></p> 
<p><strong><span style="color:#fe2c24;">ä¸“æ ä»‹ç»ï¼š</span></strong></p> 
<p>âœ¨âœ¨âœ¨<span style="color:#ff9900;">åŸåˆ›é­”æ”¹ç½‘ç»œã€å¤ç°å‰æ²¿è®ºæ–‡ï¼Œç»„åˆä¼˜åŒ–åˆ›æ–°</span></p> 
<p>ğŸš€ğŸš€ğŸš€<span style="color:#ffd900;">å°ç›®æ ‡ã€é®æŒ¡ç‰©ã€éš¾æ ·æœ¬æ€§èƒ½æå‡</span></p> 
<p>ğŸ‰ğŸ‰ğŸ‰<span style="color:#a2e043;">æŒç»­æ›´æ–°ä¸­ï¼Œå®šæœŸæ›´æ–°ä¸åŒæ•°æ®é›†æ¶¨ç‚¹æƒ…å†µ</span><br> &nbsp;</p> 
<h2><a name="t0"></a>2.æ–°ç‰ˆæœ¬yolov8å¦‚ä½•æ·»åŠ æ³¨æ„åŠ›æœºåˆ¶</h2> 
<p id="articleContentId">é€šè¿‡EMAæ³¨æ„åŠ›è¿›è¡Œå±•å¼€ï¼š<a href="https://cv2023.blog.csdn.net/article/details/131370577" title="Yolov8æ”¹è¿›---æ³¨æ„åŠ›æœºåˆ¶ï¼šICASSP2023 EMAåŸºäºè·¨ç©ºé—´å­¦ä¹ çš„é«˜æ•ˆå¤šå°ºåº¦æ³¨æ„åŠ›ã€æ•ˆæœä¼˜äºECAã€CBAMã€CA | å°ç›®æ ‡æ¶¨ç‚¹æ˜æ˜¾_AIå°æ€ªå…½çš„åšå®¢-CSDNåšå®¢">Yolov8æ”¹è¿›---æ³¨æ„åŠ›æœºåˆ¶ï¼šICASSP2023 EMAåŸºäºè·¨ç©ºé—´å­¦ä¹ çš„é«˜æ•ˆå¤šå°ºåº¦æ³¨æ„åŠ›ã€æ•ˆæœä¼˜äºECAã€CBAMã€CA | å°ç›®æ ‡æ¶¨ç‚¹æ˜æ˜¾_AIå°æ€ªå…½çš„åšå®¢-CSDNåšå®¢</a></p> 
<h3><a name="t1"></a>2.1&nbsp;ultralytics/nn/modules/conv.pyåŠ å…¥EMA</h3> 
<p>ç¬¬12è¡ŒåŠ å…¥EMA_attention</p> 
<pre data-index="0"><code class="hljs language-cobol"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">__<span class="hljs-literal">all</span>__ <span class="hljs-operator">=</span> (<span class="hljs-string">'Conv'</span>, <span class="hljs-string">'LightConv'</span>, <span class="hljs-string">'DWConv'</span>, <span class="hljs-string">'DWConvTranspose2d'</span>, <span class="hljs-string">'ConvTranspose'</span>, <span class="hljs-string">'Focus'</span>, <span class="hljs-string">'GhostConv'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'ChannelAttention'</span>, <span class="hljs-string">'SpatialAttention'</span>, <span class="hljs-string">'CBAM'</span>, <span class="hljs-string">'Concat'</span>, <span class="hljs-string">'RepConv'</span>,<span class="hljs-string">'EMA_attention'</span>)</div></div></li></ol></code><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<pre data-index="1" class="set-code-hide" name="code"><code class="hljs language-cobol"><ol class="hljs-ln" style="width:1069px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">###################### EMA_attention  ####     <span class="hljs-keyword">START</span>   <span class="hljs-keyword">by</span>  AI<span class="hljs-operator">&amp;</span>CV  ###############################</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">import torch</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">from</span> torch import nn</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">class</span> EMA_attention(nn.Module):</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    def __init__(<span class="hljs-keyword">self</span>, channels, c<span class="hljs-number">2</span><span class="hljs-operator">=</span>None, factor<span class="hljs-operator">=</span><span class="hljs-number">32</span>):</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">super</span>(EMA_attention, <span class="hljs-keyword">self</span>).__init__()</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.groups <span class="hljs-operator">=</span> factor</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        assert channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.softmax <span class="hljs-operator">=</span> nn.Softmax(-<span class="hljs-number">1</span>)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.agp <span class="hljs-operator">=</span> nn.AdaptiveAvgPool<span class="hljs-number">2</span>d((<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.pool_h <span class="hljs-operator">=</span> nn.AdaptiveAvgPool<span class="hljs-number">2</span>d((None, <span class="hljs-number">1</span>))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.pool_w <span class="hljs-operator">=</span> nn.AdaptiveAvgPool<span class="hljs-number">2</span>d((<span class="hljs-number">1</span>, None))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.gn <span class="hljs-operator">=</span> nn.GroupNorm(channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.conv<span class="hljs-number">1</span>x<span class="hljs-number">1</span> <span class="hljs-operator">=</span> nn.Conv<span class="hljs-number">2</span>d(channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, kernel_<span class="hljs-keyword">size</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>, stride<span class="hljs-operator">=</span><span class="hljs-number">1</span>, padding<span class="hljs-operator">=</span><span class="hljs-number">0</span>)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">self</span>.conv<span class="hljs-number">3</span>x<span class="hljs-number">3</span> <span class="hljs-operator">=</span> nn.Conv<span class="hljs-number">2</span>d(channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, channels <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, kernel_<span class="hljs-keyword">size</span><span class="hljs-operator">=</span><span class="hljs-number">3</span>, stride<span class="hljs-operator">=</span><span class="hljs-number">1</span>, padding<span class="hljs-operator">=</span><span class="hljs-number">1</span>)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    def forward(<span class="hljs-keyword">self</span>, x):</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        b, c, h, w <span class="hljs-operator">=</span> x.<span class="hljs-keyword">size</span>()</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">group</span>_x <span class="hljs-operator">=</span> x.reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, -<span class="hljs-number">1</span>, h, w)  # b<span class="hljs-operator">*</span>g,c<span class="hljs-operator">/</span><span class="hljs-operator">/</span>g,h,w</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x_h <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.pool_h(<span class="hljs-keyword">group</span>_x)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x_w <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.pool_w(<span class="hljs-keyword">group</span>_x).permute(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        hw <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.conv<span class="hljs-number">1</span>x<span class="hljs-number">1</span>(torch.cat([x_h, x_w], dim<span class="hljs-operator">=</span><span class="hljs-number">2</span>))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x_h, x_w <span class="hljs-operator">=</span> torch.split(hw, [h, w], dim<span class="hljs-operator">=</span><span class="hljs-number">2</span>)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.gn(<span class="hljs-keyword">group</span>_x <span class="hljs-operator">*</span> x_h.sigmoid() <span class="hljs-operator">*</span> x_w.permute(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>).sigmoid())</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.conv<span class="hljs-number">3</span>x<span class="hljs-number">3</span>(<span class="hljs-keyword">group</span>_x)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">11</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.softmax(<span class="hljs-keyword">self</span>.agp(x<span class="hljs-number">1</span>).reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).permute(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">12</span> <span class="hljs-operator">=</span> x<span class="hljs-number">2</span>.reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, c <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, -<span class="hljs-number">1</span>)  # b<span class="hljs-operator">*</span>g, c<span class="hljs-operator">/</span><span class="hljs-operator">/</span>g, hw</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">21</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.softmax(<span class="hljs-keyword">self</span>.agp(x<span class="hljs-number">2</span>).reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).permute(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>))</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        x<span class="hljs-number">22</span> <span class="hljs-operator">=</span> x<span class="hljs-number">1</span>.reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, c <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">self</span>.groups, -<span class="hljs-number">1</span>)  # b<span class="hljs-operator">*</span>g, c<span class="hljs-operator">/</span><span class="hljs-operator">/</span>g, hw</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        weights <span class="hljs-operator">=</span> (torch.matmul(x<span class="hljs-number">11</span>, x<span class="hljs-number">12</span>) <span class="hljs-operator">+</span> torch.matmul(x<span class="hljs-number">21</span>, x<span class="hljs-number">22</span>)).reshape(b <span class="hljs-operator">*</span> <span class="hljs-keyword">self</span>.groups, <span class="hljs-number">1</span>, h, w)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">group</span>_x <span class="hljs-operator">*</span> weights.sigmoid()).reshape(b, c, h, w)</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">###################### EMA_attention  ####     <span class="hljs-keyword">END</span>   <span class="hljs-keyword">by</span>  AI<span class="hljs-operator">&amp;</span>CV  ###############################</div></div></li></ol></code><div class="hide-preCode-box"><span class="hide-preCode-bt" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.7365&quot;}"><img class="look-more-preCode contentImg-no-view" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png" alt="" title=""></span></div><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<h3><a name="t2"></a>2.2&nbsp;ultralytics/nn/modules/__init__.pyåŠ å…¥EMA</h3> 
<p>ä»¥ä¸‹éƒ½åŠ å…¥EMA_attention</p> 
<pre data-index="2"><code class="hljs language-haskell"><ol class="hljs-ln" style="width:1010px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-title">rom</span> .conv <span class="hljs-keyword">import</span> (<span class="hljs-type">CBAM</span>, <span class="hljs-type">ChannelAttention</span>, <span class="hljs-type">Concat</span>, <span class="hljs-type">Conv</span>, <span class="hljs-type">Conv2</span>, <span class="hljs-type">ConvTranspose</span>, <span class="hljs-type">DWConv</span>, <span class="hljs-type">DWConvTranspose2d</span>, <span class="hljs-type">Focus</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">                   <span class="hljs-type">GhostConv</span>, <span class="hljs-type">LightConv</span>, <span class="hljs-type">RepConv</span>, <span class="hljs-type">SpatialAttention</span>,<span class="hljs-type">EMA_attention</span>)</div></div></li></ol></code><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<pre data-index="3"><code class="hljs language-cobol"><ol class="hljs-ln" style="width:1069px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">__<span class="hljs-literal">all</span>__ <span class="hljs-operator">=</span> (<span class="hljs-string">'Conv'</span>, <span class="hljs-string">'Conv2'</span>, <span class="hljs-string">'LightConv'</span>, <span class="hljs-string">'RepConv'</span>, <span class="hljs-string">'DWConv'</span>, <span class="hljs-string">'DWConvTranspose2d'</span>, <span class="hljs-string">'ConvTranspose'</span>, <span class="hljs-string">'Focus'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'GhostConv'</span>, <span class="hljs-string">'ChannelAttention'</span>, <span class="hljs-string">'SpatialAttention'</span>, <span class="hljs-string">'CBAM'</span>, <span class="hljs-string">'EMA_attention'</span>,<span class="hljs-string">'Concat'</span>, <span class="hljs-string">'TransformerLayer'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'TransformerBlock'</span>, <span class="hljs-string">'MLPBlock'</span>, <span class="hljs-string">'LayerNorm2d'</span>, <span class="hljs-string">'DFL'</span>, <span class="hljs-string">'HGBlock'</span>, <span class="hljs-string">'HGStem'</span>, <span class="hljs-string">'SPP'</span>, <span class="hljs-string">'SPPF'</span>, <span class="hljs-string">'C1'</span>, <span class="hljs-string">'C2'</span>, <span class="hljs-string">'C3'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'C2f'</span>, <span class="hljs-string">'C3x'</span>, <span class="hljs-string">'C3TR'</span>, <span class="hljs-string">'C3Ghost'</span>, <span class="hljs-string">'GhostBottleneck'</span>, <span class="hljs-string">'Bottleneck'</span>, <span class="hljs-string">'BottleneckCSP'</span>, <span class="hljs-string">'Proto'</span>, <span class="hljs-string">'Detect'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'Segment'</span>, <span class="hljs-string">'Pose'</span>, <span class="hljs-string">'Classify'</span>, <span class="hljs-string">'TransformerEncoderLayer'</span>, <span class="hljs-string">'RepC3'</span>, <span class="hljs-string">'RTDETRDecoder'</span>, <span class="hljs-string">'AIFI'</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-string">'DeformableTransformerDecoder'</span>, <span class="hljs-string">'DeformableTransformerDecoderLayer'</span>, <span class="hljs-string">'MSDeformAttn'</span>, <span class="hljs-string">'MLP'</span>)</div></div></li></ol></code><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<h3><a name="t3"></a>2.3&nbsp;ultralytics/nn/tasks.pyåŠ å…¥EMA</h3> 
<pre data-index="4"><code class="hljs language-haskell"><ol class="hljs-ln" style="width:1111px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-title">from</span> ultralytics.nn.modules <span class="hljs-keyword">import</span> (<span class="hljs-type">AIFI</span>, <span class="hljs-type">C1</span>, <span class="hljs-type">C2</span>, <span class="hljs-type">C3</span>, <span class="hljs-type">C3TR</span>, <span class="hljs-type">SPP</span>, <span class="hljs-type">SPPF</span>, <span class="hljs-type">Bottleneck</span>, <span class="hljs-type">BottleneckCSP</span>, <span class="hljs-type">C2f</span>, <span class="hljs-type">C3Ghost</span>, <span class="hljs-type">C3x</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">                                    <span class="hljs-type">Classify</span>, <span class="hljs-type">Concat</span>, <span class="hljs-type">Conv</span>, <span class="hljs-type">Conv2</span>, <span class="hljs-type">ConvTranspose</span>, <span class="hljs-type">Detect</span>, <span class="hljs-type">DWConv</span>, <span class="hljs-type">DWConvTranspose2d</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">                                    <span class="hljs-type">Focus</span>, <span class="hljs-type">GhostBottleneck</span>, <span class="hljs-type">GhostConv</span>, <span class="hljs-type">HGBlock</span>, <span class="hljs-type">HGStem</span>, <span class="hljs-type">Pose</span>, <span class="hljs-type">RepC3</span>, <span class="hljs-type">RepConv</span>,<span class="hljs-type">EMA_attention</span>,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">                                    <span class="hljs-type">RTDETRDecoder</span>, <span class="hljs-type">Segment</span>)</div></div></li></ol></code><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<p>def parse_model(d, ch, verbose=True): &nbsp;# model_dict, input_channels(3)åŠ å…¥</p> 
<pre data-index="5"><code class="hljs language-cobol"><ol class="hljs-ln" style="width:1161px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">if</span> m <span class="hljs-keyword">in</span> (Classify, Conv, ConvTranspose, GhostConv, Bottleneck, GhostBottleneck, SPP, SPPF, DWConv, Focus,</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">                 BottleneckCSP, C<span class="hljs-number">1</span>, C<span class="hljs-number">2</span>, C<span class="hljs-number">2</span>f, C<span class="hljs-number">3</span>, C<span class="hljs-number">3</span>TR, C<span class="hljs-number">3</span>Ghost, nn.ConvTranspose<span class="hljs-number">2</span>d, DWConvTranspose<span class="hljs-number">2</span>d, C<span class="hljs-number">3</span>x, RepC<span class="hljs-number">3</span>,EMA_attention):</div></div></li></ol></code><div class="hljs-button {2}" data-title="å¤åˆ¶" onclick="hljs.copyCode(event)"></div></pre> 
<h3><a name="t4"></a>2.4å¼€å¯è®­ç»ƒ</h3> 
<p><img alt="" height="275" src="https://img-blog.csdnimg.cn/8564b79f223a40109bf96c64a913c49b.png" width="866"></p> 
<p></p>
                </div><div data-report-view="{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;spm&quot;:&quot;1001.2101.3001.6548&quot;,&quot;dest&quot;:&quot;https://cv2023.blog.csdn.net/article/details/132020419&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}"><div></div></div>
        </div>